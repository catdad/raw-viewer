name: Node CI

on: [push]

jobs:
  linux:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: use node
        uses: actions/setup-node@v1
      - name: test
        run: |
          echo tests will go here
          exit 1
  macos:
    runs-on: macOS-10.14
    steps:
      - uses: actions/checkout@v1
      - name: use node ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node-version }}
      - name: test
        run: |
          npm install
          npm test
      - name: build
        run: |
          npm run package -- --version $GITHUB_SHA
          ls dist
  windows:
    env:
      CI: true
      FORCE_COLOR: 1
    runs-on: windows-2019
    steps:
      - uses: actions/checkout@v1
      - name: use node ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node-version }}
      - name: test
        run: |
          call npm install
          call npm test
      - name: build
        run: |
          call npm run package -- --version $GITHUB_SHA
          dir dist
          
