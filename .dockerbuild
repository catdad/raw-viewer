FROM ubuntu:18.04

COPY . .

ENV DEBIAN_FRONTEND noninteractive

RUN apt update
RUN apt install --yes build-essential gdebi-core wget xvfb
RUN wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
RUN gdebi --non-interactive google-chrome-stable_current_amd64.deb
RUN wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash
RUN nvm install 10

RUN echo node version $(node -v)
RUN echo npm version $(npm -v)

RUN npm ci
RUN npm run citest
